{"version":3,"file":"@index.js.map","sources":["@index.js","$.js","main.js","balls.js"],"sourcesContent":["var require = function() {\r\n    var modules = {};\r\n    \r\n    return function(id, body) {\r\n        var mod;\r\n        body = window[\"#\" + id];\r\n        if (typeof body === 'undefined') {\r\n            var err = new Error(\"Required module is missing: \" + id);   \r\n            console.error(err.stack);\r\n            throw err;\r\n        }\r\n        mod = modules[id];\r\n        if (typeof mod === 'undefined') {\r\n            mod = {exports: {}};\r\n            var exports = mod.exports;\r\n            body(exports, mod);\r\n            modules[id] = mod.exports;\r\n            mod = mod.exports;\r\n            //console.log(\"Module initialized: \" + id);\r\n        }\r\n        return mod;\r\n    };\r\n}();\r\nfunction addListener(e,l) {\r\n    if (window.addEventListener) {\r\n        window.addEventListener(e,l,false);\r\n    } else {\r\n        window.attachEvent('on' + e, l);\r\n    }\r\n};\r\n\r\naddListener(\r\n    'DOMContentLoaded',\r\n    function() {\r\n        document.body.parentNode.$data = {};\r\n        // Attach controllers.\r\n        APP = require('main');\nsetTimeout(function (){if(typeof APP.start==='function')APP.start()});\r\n    }\r\n);\r\n","window['#$']=function(exports,module){  exports.config={\n    name:\"demo-bouncing-balls\",\n    description:\"WebGL demo of bouncing balls\",\n    author:\"Tolokoban\",\n    version:\"1.0.0\",\n    major:1,\n    minor:0,\n    revision:0,\n    date:new Date(2016,1,13,16,29,11)\n};\nvar currentLang = null;\r\nexports.lang = function(lang) {\r\n    if (lang === undefined) {\r\n        lang = window.localStorage.getItem(\"Language\");\r\n        if (!lang) {\r\n            lang = window.navigator.language;\r\n            if (!lang) {\r\n                lang = window.navigator.browserLanguage;\r\n                if (!lang) {\r\n                    lang = \"fr\";\r\n                }\r\n            }\r\n        }\r\n        lang = lang.substr(0, 2).toLowerCase();\r\n    }\r\n    currentLang = lang;\r\n    window.localStorage.setItem(\"Language\", lang);\r\n    return lang;\r\n};\r\nexports.intl = function(words, params) {\r\n    var dic = words[exports.lang()],\r\n    k = params[0],\r\n    txt, newTxt, i, c, lastIdx, pos;\r\n    if (!dic) {\r\n        //console.error(\"Missing internationalization for language : \\\"\" + exports.lang() + \"\\\"!\");\r\n        return k;\r\n    }\r\n    txt = dic[k];\r\n    if (!txt) {\r\n        //console.error(\"Missing internationalization [\" + exports.lang() + \"]: \\\"\" + k + \"\\\"!\");\r\n        return k;\r\n    }\r\n    if (params.length > 1) {\r\n        newTxt = \"\";\r\n        lastIdx = 0;\r\n        for (i = 0 ; i < txt.length ; i++) {\r\n            c = txt.charAt(i);\r\n            if (c === '$') {\r\n                newTxt += txt.substring(lastIdx, i);\r\n                i++;\r\n                pos = txt.charCodeAt(i) - 48;\r\n                if (pos < 0 || pos >= params.length) {\r\n                    newTxt += \"$\" + txt.charAt(i);\r\n                } else {\r\n                    newTxt += params[pos];\r\n                }\r\n                lastIdx = i + 1;\r\n            } else if (c === '\\\\') {\r\n                newTxt += txt.substring(lastIdx, i);\r\n                i++;\r\n                newTxt += txt.charAt(i);\r\n                lastIdx = i + 1;\r\n            }\r\n        }\r\n        newTxt += txt.substr(lastIdx);\r\n        txt = newTxt;\r\n    }\r\n    return txt;\r\n};\r\n }\r\n","window['#main']=function(exports,module){  var Balls = require(\"balls\");\n\nvar BALLS = 200;\n\n// Div where to put the frames per second.\nvar fps = document.getElementById('fps');\n\nvar cameraMotion = {\n    alpha: 0,\n    beta: Math.PI / 8,\n    radius: 6,\n    target: Balls.center\n};\n\nconsole.info(\"[main] window.innerWidth=\", window.innerWidth);\nconsole.info(\"[main] window.innerHeight=\", window.innerHeight);\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 0.1, 1000 );\nvar renderer = new THREE.WebGLRenderer({ alpha: true });\nrenderer.setClearColor( 0x000000, 0.0);\nrenderer.setPixelRatio( window.devicePixelRatio );\nrenderer.setSize( window.innerWidth, window.innerHeight );\ndocument.body.appendChild( renderer.domElement );\n\ncreateFloorGrid();\n\n// Adding balls.\nBalls.create( BALLS ).forEach(function ( mesh ) {\n    scene.add( mesh );\n});\n\n\nfunction createFloorGrid() {\n    var x, z;\n    var b = Balls.bounds;\n\n    for ( x=b.x ; x<=b.X ; x++ ) {\n        scene.add(\n            createLine({\n                vertices: [[x, b.y, b.z], [x, b.y, b.Z]]\n            })\n        );\n    }\n    for ( z=b.z ; z<=b.Z ; z++ ) {\n        scene.add(\n            createLine({\n                vertices: [[b.x, b.y, z], [b.X, b.y, z]]\n            })\n        );\n    }\n}\n\n\nwindow.addEventListener( 'resize', onWindowResize, false );\ndocument.addEventListener( 'mousemove', onDocumentMouseMove, false );\ndocument.addEventListener( 'touchmove', onDocumentMouseMove, false );\n\nfunction onWindowResize() {\n    var W = window.innerWidth;\n    var H = window.innerHeight;\n\n    camera.aspect = W / H;\n    camera.updateProjectionMatrix();\n    renderer.setSize( W, H );\n}\n\nfunction onDocumentMouseMove( evt ) {\n    if (Array.isArray(evt.touches)) {\n        evt = evt.touches[0];\n    }\n    var x = 2 * (evt.clientX / window.innerWidth) - 1;\n    var y = 2 * (evt.clientY / window.innerHeight) - 1;\n    cameraMotion.alpha = x * Math.PI;\n    cameraMotion.beta = (1 + y) * Math.PI / 4;\n}\n\n\n\nvar lastTime = 0;\nvar fpsTime = 0;\nvar nbFrames = 0;\n\nfunction anim( time ) {\n    window.requestAnimationFrame( anim );\n    if (!lastTime) {\n        lastTime = time;\n        fpsTime = time;\n        nbFrames = 0;\n        return;\n    }\n    nbFrames++;\n    if (nbFrames == 10) {\n        fps.textContent = (10000 / (time - fpsTime)).toFixed(0) + \" fps\";\n        fpsTime = time;\n        nbFrames = 0;\n    }\n    Balls.move( time, time - lastTime, cameraMotion );\n    moveCamera();\n    lastTime = time;\n    // Ask WebGL to refresh the screen.\n    renderer.render( scene, camera );\n}\n\nwindow.requestAnimationFrame( anim );\n\n\nfunction moveCamera() {\n    var cam = cameraMotion;\n\n    var R = cam.radius;\n    var r = R * Math.cos( cam.beta );\n    var x = r * Math.cos( cam.alpha );\n    var y = R * Math.sin( cam.beta );\n    var z = r * Math.sin( cam.alpha );\n\n    camera.position.x = x + cam.target.x;\n    camera.position.y = y + cam.target.y;\n    camera.position.z = z + cam.target.z;\n    camera.lookAt( cam.target );\n}\n\n\nfunction createLine(opt) {\n    if (typeof opt === 'undefined') opt = { vertices: [] };\n    if (typeof opt.color === 'undefined') opt.color = 0x000000;\n    if (typeof opt.linewidth === 'undefined') opt.linewidth = 1;\n\n\n    var mat = new THREE.LineBasicMaterial({\n        color: opt.color,\n        linewidth: opt.linewidth\n    });\n\n    var geo = new THREE.Geometry();\n    opt.vertices.forEach(function (vertex) {\n        geo.vertices.push(\n            new THREE.Vector3( vertex[0], vertex[1], vertex[2] )\n        );\n    });\n\n    return new THREE.Line( geo, mat );\n};\n }\r\n","window['#balls']=function(exports,module){  /****************************************\nThis modules deals with balls creation and animation.\n\nExports:\n* `center`:\n* `create( nbBalls )`:\n* `move( time, delta )`:\n****************************************/\n\n// Bounds of the box in which the balls bounce.\nvar bounds = {\n    x: -6, X: 6,\n    y: 0, Y: 2*6,\n    z: -6, Z: 6\n};\n// Point the camera loot at.\nvar center = new THREE.Vector3(\n    0.5 * (bounds.x + bounds.X),\n    bounds.y + 1,\n    0.5 * (bounds.z + bounds.Z)\n);\n// Array of the objects describing the balls.\n// { mesh:..., vx,..., vy:..., vz:..., x:..., y:..., z:..., delta:...}\nvar balls = [];\n\nfunction createBalls(nbBalls) {\n    var meshes = [];\n    var ball;\n    for ( var i=0 ; i<nbBalls ; i++ ) {\n        ball = {\n            mesh: new THREE.Mesh( createGeo(), createMat() ),\n            vx: Math.random() - .5,\n            vy: Math.random() - .5,\n            vz: Math.random() - .5,\n            x: rnd( bounds.x, bounds.X ),\n            y: rnd( bounds.y, bounds.Y ),\n            z: rnd( bounds.z, bounds.Z ),\n            delta: 1\n        };\n        ball.mesh.position.set( ball.x, ball.y, ball.z );\n        balls.push( ball );\n        meshes.push( ball.mesh );\n    }\n    return meshes;\n}\n\n\n/**\n * Create  a   shader  material  using  the   shaders  `vertex.c`  and\n * `fragment.c`.\n */\nfunction createMat() {\n    var col = randomColor();\n    var vec = new THREE.Vector3( col.r, col.g, col.b );\n    var mat = new THREE.ShaderMaterial({\n        uniforms: {            \n            uni_Color: { type: \"v3\", value: vec },\n            uni_Ratio: { type: \"f\", value: window.innerWidth / window.innerHeight },\n            uni_Alpha: { type: \"f\", value: 0 },\n            uni_Beta: { type: \"f\", value: 0 },\n            uni_Time: { type: \"f\", value: 0 },\n            uni_Speed: { type: \"f\", value: (Math.random() - .5) * 0.01 }\n        },\n        vertexShader: document.getElementById( 'vertex' ).textContent,\n        fragmentShader: document.getElementById( 'fragment' ).textContent,\n        transparent: true\n    });\n    return mat;\n};\n\n\n/**\n * Create the geometry of a single square centered in (0,0,0) on plane\n * Z=0 and with a side of length 1.\n */\nfunction createGeo() {\n    var geo = new THREE.Geometry();\n    geo.vertices.push(\n        new THREE.Vector3( -.5, -.5, 0 ),\n        new THREE.Vector3(  .5, -.5, 0 ),\n        new THREE.Vector3(  .5,  .5, 0 ),\n        new THREE.Vector3( -.5,  .5, 0 )\n    );\n    geo.faces.push(\n        new THREE.Face3( 0, 1, 2 ),\n        new THREE.Face3( 0, 2, 3 )\n    );\n    geo.computeFaceNormals ();\n    geo.computeVertexNormals ();\n    return geo;\n}\n\n\n/**\n * Bounces of the balls.\n */\nfunction moveBalls( time, delta, cameraMotion ) {\n    delta = Math.min( 160, delta );\n    var bx = bounds.x + .5;\n    var bX = bounds.X - .5;\n    var by = bounds.y + .5;\n    var bY = bounds.Y - .5;\n    var bz = bounds.z + .5;\n    var bZ = bounds.Z - .5;\n    var speed = 0.0002;\n\n    var ratio = window.innerWidth / window.innerHeight;\n\n    balls.forEach(function (ball) {\n        // Gravity.\n        ball.vy -= delta * speed;\n\n        // Move the ball.\n        var mesh = ball.mesh;\n        mesh.material.uniforms.uni_Ratio.value = window.innerWidth / window.innerHeight;\n        mesh.material.uniforms.uni_Alpha.value = cameraMotion.alpha;\n        mesh.material.uniforms.uni_Beta.value = cameraMotion.beta;\n        mesh.material.uniforms.uni_Time.value = time;\n        mesh.position.x = ball.x + ball.vx * delta * speed;\n        mesh.position.y = ball.y + ball.vy * delta * speed;\n        mesh.position.z = ball.z + ball.vz * delta * speed;\n\n        // Detect bounces.\n        if (mesh.position.x < bx) {\n            ball.vx = -ball.vx;\n            mesh.position.x = bx;\n        }\n        if (mesh.position.x > bX) {\n            ball.vx = -ball.vx;\n            mesh.position.x = bX;\n        }\n        if (mesh.position.y < by) {\n            ball.vy = -ball.vy;\n            if (ball.vy < 0.001) {\n                ball.vy = Math.random() * 5;\n            }\n            mesh.position.y = by;\n        }\n        if (mesh.position.y > bY) {\n            ball.vy = -ball.vy;\n            mesh.position.y = bY;\n        }\n        if (mesh.position.z < bz) {\n            ball.vz = -ball.vz;\n            mesh.position.z = bz;\n        }\n        if (mesh.position.z > bZ) {\n            ball.vz = -ball.vz;\n            mesh.position.z = bZ;\n        }\n\n        // Save current position and delta.\n        ball.x = mesh.position.x;\n        ball.y = mesh.position.y;\n        ball.z = mesh.position.z;\n        ball.delta = delta;\n    }, this);\n}\n\n\nfunction randomColor() {\n    var dice = Math.floor( Math.random() * 6 );\n    var x = Math.random();\n    if ( dice == 0 ) return new THREE.Color( 1, 0, x );\n    if ( dice == 1 ) return new THREE.Color( 0, 1, x );\n    if ( dice == 2 ) return new THREE.Color( 1, x, 0 );\n    if ( dice == 3 ) return new THREE.Color( 0, x, 1 );\n    if ( dice == 4 ) return new THREE.Color( x, 0, 1 );\n    if ( dice == 5 ) return new THREE.Color( x, 1, 0 );\n}\n\n\nfunction rnd( a, b ) {\n    if (typeof a === 'undefined') a = 1;\n    if (typeof b === 'undefined') {\n        b = a;\n        a = 0;\n    }\n    return a + Math.random() * (b - a);\n}\n\n\nfunction constraint( v, min, max ) {\n    if (typeof min === 'undefined') min = 1;\n    if (typeof max === 'undefined') max = -min;\n\n    if (max < min) {\n        var tmp = min;\n        min = max;\n        max = tmp;\n    }\n\n    return Math.max( min, Math.min( max, v ) );\n}\n\n\n\nexports.bounds = bounds;\nexports.center = center;\nexports.move = moveBalls;\nexports.create = createBalls;\n }\r\n"],"names":["addListener","e","l","window","addEventListener","attachEvent","require","modules","id","body","mod","err","Error","console","error","stack","exports","document","parentNode","$data","APP","setTimeout","start","window","exports","module","config","name","description","author","version","major","minor","revision","date","Date","currentLang","lang","undefined","localStorage","getItem","navigator","language","browserLanguage","substr","toLowerCase","setItem","intl","words","params","txt","newTxt","i","c","lastIdx","pos","dic","k","length","charAt","substring","charCodeAt","window","exports","module","createFloorGrid","x","z","b","Balls","bounds","X","scene","add","createLine","vertices","y","Z","onWindowResize","W","innerWidth","H","innerHeight","camera","aspect","updateProjectionMatrix","renderer","setSize","onDocumentMouseMove","evt","Array","isArray","touches","clientX","clientY","cameraMotion","alpha","Math","PI","beta","anim","time","requestAnimationFrame","lastTime","nbFrames","fps","textContent","fpsTime","toFixed","move","moveCamera","render","cam","R","radius","r","cos","sin","position","target","lookAt","opt","color","linewidth","mat","THREE","LineBasicMaterial","geo","Geometry","forEach","vertex","push","Vector3","Line","require","BALLS","document","getElementById","center","console","info","Scene","PerspectiveCamera","WebGLRenderer","setClearColor","setPixelRatio","devicePixelRatio","body","appendChild","domElement","create","mesh","addEventListener","window","exports","module","createBalls","nbBalls","ball","meshes","i","mesh","THREE","Mesh","createGeo","createMat","vx","Math","random","vy","vz","x","rnd","bounds","X","y","Y","z","Z","delta","position","set","balls","push","col","randomColor","vec","Vector3","r","g","b","mat","ShaderMaterial","uniforms","uni_Color","type","value","uni_Ratio","innerWidth","innerHeight","uni_Alpha","uni_Beta","uni_Time","uni_Speed","vertexShader","document","getElementById","textContent","fragmentShader","transparent","geo","Geometry","vertices","faces","Face3","computeFaceNormals","computeVertexNormals","moveBalls","time","cameraMotion","min","bx","bX","by","bY","bz","bZ","speed","forEach","material","alpha","beta","this","dice","floor","Color","a","center","move","create"],"mappings":"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"}