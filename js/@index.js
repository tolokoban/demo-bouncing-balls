function addListener(e,n){window.addEventListener?window.addEventListener(e,n,!1):window.attachEvent("on"+e,n)}var require=function(){var e={};return function(n,t){var r;if(t=window["#"+n],"undefined"==typeof t){var o=new Error("Required module is missing: "+n);throw console.error(o.stack),o}if(r=e[n],"undefined"==typeof r){r={exports:{}};var i=r.exports;t(i,r),e[n]=r.exports,r=r.exports}return r}}();addListener("DOMContentLoaded",function(){document.body.parentNode.$data={},APP=require("main"),setTimeout(function(){"function"==typeof APP.start&&APP.start()})});
window["#$"]=function(n,o){n.config={name:"demo-bouncing-balls",description:"WebGL demo of bouncing balls",author:"Tolokoban",version:"1.0.0",major:1,minor:0,revision:0,date:new Date(2016,1,13,16,29,11)};var a=null;n.lang=function(n){return void 0===n&&(n=window.localStorage.getItem("Language"),n||(n=window.navigator.language,n||(n=window.navigator.browserLanguage,n||(n="fr"))),n=n.substr(0,2).toLowerCase()),a=n,window.localStorage.setItem("Language",n),n},n.intl=function(o,a){var r,t,e,i,g,u,l=o[n.lang()],s=a[0];if(!l)return s;if(r=l[s],!r)return s;if(a.length>1){for(t="",g=0,e=0;e<r.length;e++)i=r.charAt(e),"$"===i?(t+=r.substring(g,e),e++,u=r.charCodeAt(e)-48,t+=0>u||u>=a.length?"$"+r.charAt(e):a[u],g=e+1):"\\"===i&&(t+=r.substring(g,e),e++,t+=r.charAt(e),g=e+1);t+=r.substr(g),r=t}return r}};
window["#main"]=function(e,n){function i(){var e,n,i=w.bounds;for(e=i.x;e<=i.X;e++)u.add(d({vertices:[[e,i.y,i.z],[e,i.y,i.Z]]}));for(n=i.z;n<=i.Z;n++)u.add(d({vertices:[[i.x,i.y,n],[i.X,i.y,n]]}))}function t(){var e=window.innerWidth,n=window.innerHeight;l.aspect=e/n,l.updateProjectionMatrix(),f.setSize(e,n)}function o(e){Array.isArray(e.touches)&&(e=e.touches[0]);var n=2*(e.clientX/window.innerWidth)-1,i=2*(e.clientY/window.innerHeight)-1;h.alpha=n*Math.PI,h.beta=(1+i)*Math.PI/4}function r(e){return window.requestAnimationFrame(r),v?(m++,10==m&&(s.textContent=(1e4/(e-E)).toFixed(0)+" fps",E=e,m=0),w.move(e,e-v,h),a(),v=e,void f.render(u,l)):(v=e,E=e,void(m=0))}function a(){var e=h,n=e.radius,i=n*Math.cos(e.beta),t=i*Math.cos(e.alpha),o=n*Math.sin(e.beta),r=i*Math.sin(e.alpha);l.position.x=t+e.target.x,l.position.y=o+e.target.y,l.position.z=r+e.target.z,l.lookAt(e.target)}function d(e){"undefined"==typeof e&&(e={vertices:[]}),"undefined"==typeof e.color&&(e.color=0),"undefined"==typeof e.linewidth&&(e.linewidth=1);var n=new THREE.LineBasicMaterial({color:e.color,linewidth:e.linewidth}),i=new THREE.Geometry;return e.vertices.forEach(function(e){i.vertices.push(new THREE.Vector3(e[0],e[1],e[2]))}),new THREE.Line(i,n)}var w=require("balls"),c=200,s=document.getElementById("fps"),h={alpha:0,beta:Math.PI/8,radius:6,target:w.center};console.info("[main] window.innerWidth=",window.innerWidth),console.info("[main] window.innerHeight=",window.innerHeight);var u=new THREE.Scene,l=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3),f=new THREE.WebGLRenderer({alpha:!0});f.setClearColor(0,0),f.setPixelRatio(window.devicePixelRatio),f.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(f.domElement),i(),w.create(c).forEach(function(e){u.add(e)}),window.addEventListener("resize",t,!1),document.addEventListener("mousemove",o,!1),document.addEventListener("touchmove",o,!1);var v=0,E=0,m=0;window.requestAnimationFrame(r)};
window["#balls"]=function(e,n){function o(e){for(var n,o=[],r=0;e>r;r++)n={mesh:new THREE.Mesh(i(),t()),vx:Math.random()-.5,vy:Math.random()-.5,vz:Math.random()-.5,x:u(v.x,v.X),y:u(v.y,v.Y),z:u(v.z,v.Z),delta:1},n.mesh.position.set(n.x,n.y,n.z),p.push(n),o.push(n.mesh);return o}function t(){var e=a(),n=new THREE.Vector3(e.r,e.g,e.b),o=new THREE.ShaderMaterial({uniforms:{uni_Color:{type:"v3",value:n},uni_Ratio:{type:"f",value:window.innerWidth/window.innerHeight},uni_Alpha:{type:"f",value:0},uni_Beta:{type:"f",value:0},uni_Time:{type:"f",value:0},uni_Speed:{type:"f",value:.01*(Math.random()-.5)}},vertexShader:document.getElementById("vertex").textContent,fragmentShader:document.getElementById("fragment").textContent,transparent:!0});return o}function i(){var e=new THREE.Geometry;return e.vertices.push(new THREE.Vector3(-.5,-.5,0),new THREE.Vector3(.5,-.5,0),new THREE.Vector3(.5,.5,0),new THREE.Vector3(-.5,.5,0)),e.faces.push(new THREE.Face3(0,1,2),new THREE.Face3(0,2,3)),e.computeFaceNormals(),e.computeVertexNormals(),e}function r(e,n,o){n=Math.min(160,n);var t=v.x+.5,i=v.X-.5,r=v.y+.5,a=v.Y-.5,u=v.z+.5,s=v.Z-.5,E=2e-4;window.innerWidth/window.innerHeight;p.forEach(function(v){v.vy-=n*E;var p=v.mesh;p.material.uniforms.uni_Ratio.value=window.innerWidth/window.innerHeight,p.material.uniforms.uni_Alpha.value=o.alpha,p.material.uniforms.uni_Beta.value=o.beta,p.material.uniforms.uni_Time.value=e,p.position.x=v.x+v.vx*n*E,p.position.y=v.y+v.vy*n*E,p.position.z=v.z+v.vz*n*E,p.position.x<t&&(v.vx=-v.vx,p.position.x=t),p.position.x>i&&(v.vx=-v.vx,p.position.x=i),p.position.y<r&&(v.vy=-v.vy,v.vy<.001&&(v.vy=5*Math.random()),p.position.y=r),p.position.y>a&&(v.vy=-v.vy,p.position.y=a),p.position.z<u&&(v.vz=-v.vz,p.position.z=u),p.position.z>s&&(v.vz=-v.vz,p.position.z=s),v.x=p.position.x,v.y=p.position.y,v.z=p.position.z,v.delta=n},this)}function a(){var e=Math.floor(6*Math.random()),n=Math.random();return 0==e?new THREE.Color(1,0,n):1==e?new THREE.Color(0,1,n):2==e?new THREE.Color(1,n,0):3==e?new THREE.Color(0,n,1):4==e?new THREE.Color(n,0,1):5==e?new THREE.Color(n,1,0):void 0}function u(e,n){return"undefined"==typeof e&&(e=1),"undefined"==typeof n&&(n=e,e=0),e+Math.random()*(n-e)}var v={x:-6,X:6,y:0,Y:12,z:-6,Z:6},s=new THREE.Vector3(.5*(v.x+v.X),v.y+1,.5*(v.z+v.Z)),p=[];e.bounds=v,e.center=s,e.move=r,e.create=o};
//# sourceMappingURL=map/@index.js.map