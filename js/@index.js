function addListener(e,n){window.addEventListener?window.addEventListener(e,n,!1):window.attachEvent("on"+e,n)}var require=function(){var e={};return function(n,t){var r;if(t=window["#"+n],"undefined"==typeof t){var o=new Error("Required module is missing: "+n);throw console.error(o.stack),o}if(r=e[n],"undefined"==typeof r){r={exports:{}};var i=r.exports;t(i,r),e[n]=r.exports,r=r.exports}return r}}();addListener("DOMContentLoaded",function(){document.body.parentNode.$data={},APP=require("main"),setTimeout(function(){"function"==typeof APP.start&&APP.start()})});
window["#$"]=function(n,o){n.config={name:"demo-bouncing-balls",description:"WebGL demo of bouncing balls",author:"Tolokoban",version:"1.0.0",major:1,minor:0,revision:0,date:new Date(2016,1,13,16,29,11)};var a=null;n.lang=function(n){return void 0===n&&(n=window.localStorage.getItem("Language"),n||(n=window.navigator.language,n||(n=window.navigator.browserLanguage,n||(n="fr"))),n=n.substr(0,2).toLowerCase()),a=n,window.localStorage.setItem("Language",n),n},n.intl=function(o,a){var r,t,e,i,g,u,l=o[n.lang()],s=a[0];if(!l)return s;if(r=l[s],!r)return s;if(a.length>1){for(t="",g=0,e=0;e<r.length;e++)i=r.charAt(e),"$"===i?(t+=r.substring(g,e),e++,u=r.charCodeAt(e)-48,t+=0>u||u>=a.length?"$"+r.charAt(e):a[u],g=e+1):"\\"===i&&(t+=r.substring(g,e),e++,t+=r.charAt(e),g=e+1);t+=r.substr(g),r=t}return r}};
window["#main"]=function(e,a){function t(){var e,a,t=s.bounds;for(e=t.x;e<=t.X;e++)p.add(o({vertices:[[e,t.y,t.z],[e,t.y,t.Z]]}));for(a=t.z;a<=t.Z;a++)p.add(o({vertices:[[t.x,t.y,a],[t.X,t.y,a]]}))}function i(){var e=window.innerWidth,a=window.innerHeight;l.aspect=e/a,l.updateProjectionMatrix(),f.setSize(e,a)}function n(e){if(window.requestAnimationFrame(n),!b)return b=e,g=e,void(v=0);v++,10==v&&(w.textContent=(1e4/(e-g)).toFixed(0)+" fps",g=e,v=0);var a=e-b;s.move(e,a,c);r(e,a),b=e,f.render(p,l)}function r(e,a){var t=c;t.alpha=t.alpha+a*t.speed.alpha,t.beta=t.beta+a*t.speed.beta,t.beta<0&&(t.beta=0,t.speed.beta=Math.abs(t.speed.beta)),t.beta>Math.PI/2&&(t.beta=Math.PI/2,t.speed.beta=-Math.abs(t.speed.beta)),t.radius<t.radiusTarget?t.radius=Math.min(t.radiusTarget,t.radius+.01*a):t.radius>t.radiusTarget&&(t.radius=Math.max(t.radiusTarget,t.radius-.01*a));var i=t.radius,n=i*Math.cos(t.beta),r=n*Math.cos(t.alpha),d=i*Math.sin(t.beta),o=n*Math.sin(t.alpha);l.position.x=r+t.target.x,l.position.y=d+t.target.y,l.position.z=o+t.target.z,l.lookAt(t.target)}function d(e,a,t){return Math.max(a,Math.min(t,e))}function o(e){"undefined"==typeof e&&(e={vertices:[]}),"undefined"==typeof e.color&&(e.color=0),"undefined"==typeof e.linewidth&&(e.linewidth=1);var a=new THREE.LineBasicMaterial({color:e.color,linewidth:e.linewidth}),t=new THREE.Geometry;return e.vertices.forEach(function(e){t.vertices.push(new THREE.Vector3(e[0],e[1],e[2]))}),new THREE.Line(t,a)}var s=require("balls"),h=require("events"),u=100,w=document.getElementById("fps"),c={alpha:Math.PI*Math.random(),beta:Math.random()*Math.PI/2,speed:{alpha:.001*Math.random(),beta:.001*Math.random()},radius:40,radiusTarget:12,target:s.center},p=new THREE.Scene,l=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3),f=new THREE.WebGLRenderer({alpha:!0});f.setClearColor(0,0),f.setPixelRatio(window.devicePixelRatio),f.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(f.domElement),t(),s.create(u).forEach(function(e){p.add(e)}),window.addEventListener("resize",i,!1);var m=h(f.domElement);m.onStart=function(){c.speed.alpha=c.speed.beta=0},m.onDrag=function(e){var a=e.sx/window.innerWidth,t=e.sy/window.innerHeight,i=.001;c.speed.alpha=d(a*i,-.01,.01),c.speed.beta=d(t*i*.2,-.01,.01)},m.onDblSwipe=function(e){var a=e.y/window.innerHeight;c.radiusTarget=c.radius=d(31*a,1,31)},m.onWheel=function(e){e=e>0?1:-1,c.radiusTarget-=e,c.radiusTarget=Math.max(1,c.radiusTarget),c.radiusTarget=Math.min(30,c.radiusTarget)};var b=0,g=0,v=0;window.requestAnimationFrame(n)};
window["#events"]=function(t,e){function n(t){var e=t[0].clientX,n=t[0].clientY,o=t[1].clientX,a=t[1].clientY,i=.5*(e+o),l=.5*(n+a),r=.5*(e-o),c=.5*(n-a),s=Math.sqrt(r*r+c*c);return{cx:i,cy:l,radius:s,time:Date.now()}}e.exports=function(t){function e(t){t.preventDefault(),t.stopPropagation();var e=t.clientX,n=t.clientY;if(0==d)p.onMove({x:e,y:n});else if(1==d){var o=Date.now(),a=1e3/Math.max(1,o-D);p.onDrag({x0:s,y0:u,xx:f,yy:v,sx:(e-f)*a,sy:(n-v)*a,x:e,y:n}),f=e,v=n,D=o}}function o(t){t.preventDefault(),t.stopPropagation(),2!=d&&(d=1,s=f=t.clientX,u=v=t.clientY,y=D=Date.now(),p.onStart({x:s,y:u}))}function a(t){if(t.preventDefault(),t.stopPropagation(),1==d){d=0;var e=t.clientX,n=t.clientY,o=Math.abs(e-s),a=Math.abs(n-u);s=e,u=n,Math.max(o,a)>p.threshold||p.onStop({x:e,y:n})}}function i(t){t.preventDefault(),t.stopPropagation();var e,o,a;if(2==d){var i=Date.now(),l=t.touches;if(1==l.length)e=l[0].clientX,o=l[0].clientY,a=1e3/Math.max(1,i-D),p.onDrag({x0:s,y0:u,xx:f,yy:v,sx:(e-f)*a,sy:(o-v)*a,x:e,y:o}),f=e,v=o,D=i;else if(2==l.length){var r=n(l);e=r.cx,o=r.cy,a=1e3/Math.max(1,i-r.time),console.log("Calling onDblSwipe()"),p.onDblSwipe({x0:h.cx,y0:h.cy,xx:x.cx,yy:x.cy,sx:(e-x.cx)*a,sy:(o-x.cy)*a,x:e,y:o}),x=r}}}function l(t){if(t.preventDefault(),t.stopPropagation(),1!=d){var e=t.touches;1==e.length?(d=2,s=f=e[0].clientX,u=v=e[0].clientY,y=D=Date.now(),p.onStart({x:s,y:u})):2==e.length&&(h=x=n(e))}}function r(t){if(t.preventDefault(),t.stopPropagation(),2==d){var e=t.touches;if(1==e.length){d=0;var n=e[0].clientX,o=e[0].clientY,a=Math.abs(n-s),i=Math.abs(o-u);if(s=n,u=o,Math.max(a,i)>p.threshold)return;p.onStop({x:n,y:o})}}}function c(t){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),0!=e&&p.onWheel(e>0?1:-1)}var s,u,f,v,h,x,p={onStart:function(t){},onStop:function(t){},onZoom:function(t){},onWheel:function(t){},onDblSwipe:function(t){console.log("not implemented!")},onMove:function(t){},onDrag:function(t){},onTap:function(t){},target:t,threshold:8,wheelDelay:200},d=0,y=0,D=0;return t.addEventListener("touchmove",i,!1),t.addEventListener("touchstart",l,!1),t.addEventListener("touchend",r,!1),t.addEventListener("mousewheel",c,!1),t.addEventListener("MozMousePixelScroll",c,!1),t.addEventListener("mousemove",e,!1),t.addEventListener("mousedown",o,!1),t.addEventListener("mouseup",a,!1),p}};
window["#balls"]=function(e,n){function t(e){for(var n,t=[],v=0;e>v;v++)n={mesh:new THREE.Mesh(r(),a()),vx:10*(Math.random()-.5),vy:Math.random()-.5,vz:10*(Math.random()-.5),x:u(h.x,h.X),y:u(h.y,h.Y),z:u(h.z,h.Z),flash:1,delta:1},n.mesh.position.set(n.x,n.y,n.z),l.push(n),t.push(n.mesh);return t}function a(){var e=i(),n=new THREE.Vector3(e.r,e.g,e.b),t=new THREE.ShaderMaterial({uniforms:{uni_Color:{type:"v3",value:n},uni_Ratio:{type:"f",value:window.innerWidth/window.innerHeight},uni_Alpha:{type:"f",value:0},uni_Beta:{type:"f",value:0},uni_Time:{type:"f",value:0},uni_Speed:{type:"f",value:.01*(Math.random()-.5)},uni_Flash:{type:"f",value:0}},vertexShader:document.getElementById("vertex").textContent,fragmentShader:document.getElementById("fragment").textContent,transparent:!0});return t}function r(){var e=new THREE.Geometry;return e.vertices.push(new THREE.Vector3(-.5,-.5,0),new THREE.Vector3(.5,-.5,0),new THREE.Vector3(.5,.5,0),new THREE.Vector3(-.5,.5,0)),e.faces.push(new THREE.Face3(0,1,2),new THREE.Face3(0,2,3)),e.computeFaceNormals(),e.computeVertexNormals(),e}function v(e,n,t){var a=[];n=Math.min(160,n);var r=h.x+.5,v=h.X-.5,i=h.y+.5,u=h.Y-.5,y=h.z+.5,m=h.Z-.5,x=2e-4;window.innerWidth/window.innerHeight;return o(),l.forEach(function(a){a.vy-=n*x;var o=a.mesh,h=o.position;o.material.uniforms.uni_Ratio.value=window.innerWidth/window.innerHeight,o.material.uniforms.uni_Alpha.value=t.alpha,o.material.uniforms.uni_Beta.value=t.beta,o.material.uniforms.uni_Time.value=e,o.material.uniforms.uni_Flash.value=a.flash,a.flash=Math.max(0,a.flash-.003*n),h.x=a.x+a.vx*n*x,h.y=a.y+a.vy*n*x,h.z=a.z+a.vz*n*x,h.x<r&&(a.vx=-a.vx,h.x=r),h.x>v&&(a.vx=-a.vx,h.x=v),h.y<i&&(a.vy=-a.vy,a.vy<.001&&(a.vy=5*Math.random()),h.y=i),h.y>u&&(a.vy=-a.vy,h.y=u),h.z<y&&(a.vz=-a.vz,h.z=y),h.z>m&&(a.vz=-a.vz,h.z=m),a.x=h.x,a.y=h.y,a.z=h.z,a.delta=n},this),a}function o(){var e,n,t,a,r,v,o,i,u,h,y,m,x,s,f;for(e=0;e<l.length-1;e++)for(t=l[e],y=t.mesh.position,n=e+1;n<l.length&&(a=l[n],m=a.mesh.position,!(a.flash>0&&t.flash>0))&&(r=m.x-y.x,v=m.y-y.y,o=m.z-y.z,i=r*r+v*v+o*o,!(i>=1))&&0!=i;n++)x=.5*(m.x+y.x),s=.5*(m.y+y.y),f=.5*(m.z+y.z),u=Math.sqrt(i),r/=u,v/=u,o/=u,y.x=x-.5*r,y.y=s-.5*v,y.z=f-.5*o,m.x=x+.5*r,m.y=s+.5*v,m.z=f+.5*o,h=Math.abs(t.vx*r+t.vy*v+t.vz*o),t.vx-=2*h*r,t.vy-=2*h*v,t.vz-=2*h*o,h=Math.abs(a.vx*r+a.vy*v+a.vz*o),a.vx+=2*h*r,a.vy+=2*h*v,a.vz+=2*h*o,t.flash=1,a.flash=1,t.vx>5&&(t.vx=5),t.vx<-5&&(t.vx=-5),t.vy>5&&(t.vy=5),t.vy<-5&&(t.vy=-5),t.vz>5&&(t.vz=5),t.vz<-5&&(t.vz=-5),a.vx>5&&(a.vx=5),a.vx<-5&&(a.vx=-5),a.vy>5&&(a.vy=5),a.vy<-5&&(a.vy=-5),a.vz>5&&(a.vz=5),a.vz<-5&&(a.vz=-5)}function i(){var e=Math.floor(6*Math.random()),n=.4*Math.random(),t=.4*Math.random(),a=.4*Math.random(),r=Math.random();return 0==e?new THREE.Color(1-n,0+t,r):1==e?new THREE.Color(0+n,1-t,r):2==e?new THREE.Color(1-n,r,0+a):3==e?new THREE.Color(0+n,r,1-a):4==e?new THREE.Color(r,0+t,1-a):5==e?new THREE.Color(r,1-t,0+a):void 0}function u(e,n){return"undefined"==typeof e&&(e=1),"undefined"==typeof n&&(n=e,e=0),e+Math.random()*(n-e)}var h={x:-7,X:7,y:0,Y:7,z:-7,Z:7},y=new THREE.Vector3(.5*(h.x+h.X),h.y+1,.5*(h.z+h.Z)),l=[];e.bounds=h,e.center=y,e.move=v,e.create=t};
//# sourceMappingURL=map/@index.js.map